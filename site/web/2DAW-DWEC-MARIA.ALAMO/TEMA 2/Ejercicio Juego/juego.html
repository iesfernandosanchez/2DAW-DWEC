<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ejercicio juego</title>    
    <script type="text/javascript">
        function getRandomInt(min, max){
            
            return Math.floor(Math.random() * (max - min)) + min;
        }
        function pideNombres(){
            
            return prompt("Introduce un nombre");
        }
        function calculaGolpe(personaje){
            
            var golpe = 0
            golpe = getRandomInt(0, personaje['fuerza']);
            return golpe;
        }
        
        function calculaDefensa(personaje){
            
            var golpe = 0
            golpe = getRandomInt(0, personaje['destreza']);
            return golpe;
        }
        
        function crearPersonaje(nombre){ 
            
            var personaje = [];
            personaje['nombre'] = nombre;
            personaje['fuerza'] = getRandomInt(5, 20);
            personaje['destreza'] = getRandomInt(5, 20);
            personaje['vida'] = getRandomInt(50, 100);

            return personaje;
        }

        function golpear(golpeador, golpeado){
            golpe = calculaGolpe( personaje1); 
                    defensa = calculaDefensa( personaje2); 
                    
                    ataque = golpe - defensa; 
                    if (ataque < 0){
                        ataque = 1 ;
                    }
                    golpeado['vida'] -= ataque;
                    console.log(golpeador['nombre']+" golpea "+ataque);
        }
        
        function lucha(personaje1, personaje2){
            while(personaje1['vida']>0 && personaje2['vida']>0){
                var quienGolpea = getRandomInt(0, 2); 
                if (quienGolpea == 1){ 
                    golpear(personaje1, personaje2);
                } else{
                    golpear(personaje2, personaje1);
                }
            }     
            
            if(personaje1['vida'] < personaje2['vida']){
                return personaje1;
            } else{
                return personaje2;
            }
            
        }
        
        
        var nombre1 = pideNombres();
        var nombre2 = pideNombres();
        
        personaje1 = crearPersonaje(nombre1);
        personaje2 = crearPersonaje(nombre2);

        console.log(personaje1);
        console.log(personaje2);
        
        perdedor = lucha(personaje1, personaje2);
        
        console.log("pierde " + perdedor['nombre'] + " con vida de " + perdedor['vida']);
        
    </script>
    
</head>
<body>
    
</body>
</html>
