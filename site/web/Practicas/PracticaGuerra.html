<!DOCTYPE html>
<html>
	<head>
	<title>Practica 5 guerrra</title>
	</head>
	<script type="text/javascript">

//Dar valor a las habilidades de los personajes
	function getRandomInt(min, max){
		return Math.floor(Math.random() * (max - min)) + min;
	}
//Pedir nombre de los personajes
	function pideNombre(){
		return prompt("Introduce un nombre");
	}
//
	function calculaDefensa(personaje){
		var golpe = 0;
		golpe = getRandomInt(0,personaje['destreza']);
		return golpe;
	}

	function calculaGolpe(personaje){
		var golpe = 0;
		golpe = getRandomInt(0,personaje['fuerza']);
		return golpe;

	}

	function creaPersonaje(nombre){
		var personaje = [];
		personaje['nombre'] = nombre;
		personaje['fuerza'] = getRandomInt(5, 20);
		personaje['destreza'] = getRandomInt(5, 20);
		personaje['vida'] = getRandomInt(5, 100);

		return personaje;
	}

	function lucha(personaje1, personaje2){
		while(personaje1['vida'] > 0 && personaje2['vida'] > 0){
			//Aleatorio para saber qui√©n golpea
			var quienGolpea = getRandomInt(0, 2);

			if(quienGolpea == 1){
				golpe = calculaGolpe(personaje1);
				defensa = calculaDefensa(personaje2);

				ataque = golpe - defensa;

				if (ataque < 0) { ataque = 1 }

				personaje2['vida'] -= ataque;

			console.log(personaje1['nombre'] + " golpea: " + ataque);

			} else {
				golpe = calculaGolpe(personaje2);
				defensa = calculaDefensa(personaje1);

				ataque = golpe - defensa;
				//para que ataque tenga valor si o si 
				if (ataque < 0) { ataque = 1 }

				personaje1['vida'] -= ataque;

			console.log(personaje2['nombre'] + " golpea: " + ataque);

			}


			if (personaje1['vida'] < personaje2['vida']) {
				return personaje1
			} else { 
				return personaje2 }
		}
	}

	alert("Elige el nombre de tu primer personaje");
	var nombre1 = pideNombre();
	alert("Elige el nombre de tu segundo personaje");
	var nombre2 = pideNombre();

	personaje1 = creaPersonaje(nombre1);
	personaje2 = creaPersonaje(nombre2);
	console.log(personaje1);
	console.log(personaje2);

	perdedor = lucha(personaje1, personaje2);
	console.log(perdedor['nombre'] + "ha perdido la batalla con una vida de " + perdedor['vida']);
		

	</script>
<body>
</body>
</html>