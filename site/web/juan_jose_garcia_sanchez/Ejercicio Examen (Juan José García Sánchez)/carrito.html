<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Carrito</title>

    <script src="js/Biblioteca.js"></script>
    <script src="js/Ejemplar.js"></script>
    <script src="js/faker.js"></script>
    <script src="js/Publicacion.js"></script>
    <script src="js/Screen.js"></script>
    <script src="js/Servicios.js"></script>


    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="vendor/simple-datatables/style.css" rel="stylesheet">

    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styleSass.css">

</head>
<body>

<script src='js/bootstrap/js/bootstrap.bundle.js'></script>
<script src="js/echarts/echarts.min.js"></script>


<script>
    let servicios;
    document.addEventListener("DOMContentLoaded", function (event) {
        let cookieCarrito = JSON.parse(getCookie("carrito"))
        let dataCarrito = []

        cookieCarrito.forEach(publicacion =>{
            dataCarrito.push([publicacion.titulo, publicacion.genero, publicacion.ejemplares[0].estado, publicacion.ejemplares[0].ubicacion])
        })

        /**
         * Initiate Datatables
         */

        let myData = {
            "headings": [
                "Titulo",
                "GÃ©nero",
                "Estado",
                "Ubicacion"
            ],
            "data": dataCarrito


        };
        const datatable = document.querySelector('#tablaCarrito')

        new simpleDatatables.DataTable(datatable, {
            columns: [
                // Sort the second column in ascending order
                {select: 1, sort: "desc"},
            ],
            'paging': false,

            'data': myData,
        });
    });



    function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) === 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }
</script>


<ul class="sidebar-nav" id="sidebar-nav">
    <li class="nav-item">
        <a class="nav-link collapsed" href="index.html">
            <i class="bi bi-house"></i>
            <span>Home</span>
        </a>
    </li><!-- End Profile Page Nav -->

    <li class="nav-item">
        <a class="nav-link collapsed" href="dashboard.html">
            <i class="bi bi-grid"></i>
            <span>Dashboard</span>
        </a>
    </li><!-- End Dashboard Nav -->

    <li class="nav-item">
        <a class="nav-link collapsed" href="publicacionesJson.html">
            <i class="bi bi-journal-text"></i>
            <span>Publicaciones to JSON</span>
        </a>
    </li><!-- End Profile Page Nav -->
    <li class="nav-item">
        <a class="nav-link " href="carrito.html">
            <i class="bi bi-cart"></i>
            <span>Carrito</span>
        </a>
    </li><!-- End Profile Page Nav -->
</ul>


<main class="main" style="margin-right: 20px;margin-left: 20px">

    <div class="pagetitle">
        <h1>Carrito</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item active">Carrito</li>
            </ol>
        </nav>
    </div><!-- End Page Title -->

    <section class="section dashboard">
        <div class="row">

            <div class="col-lg-12">
                <div class="row">
                    <div class="col-12">
                        <div class="card recent-sales overflow-auto">
                            <div class="card-body">
                                <h5 class="card-title">Ejemplares en carrito</h5>
                                <table id="tablaCarrito" class="table table-borderless datatable">

                                </table>
                            </div>
                        </div>
                    </div><
                </div>
            </div>
        </div>
    </section>
</main><!-- End #main -->

<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
        class="bi bi-arrow-up-short"></i></a>

<script src="js/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="js/simple-datatables/simple-datatables.js"></script>
<script src="vendor/main.js"></script>

</body>
</html>